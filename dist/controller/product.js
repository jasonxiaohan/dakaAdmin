/** layuiAdmin.pro-v1.2.1 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(["table","form"],function(e){var t=(layui.$,layui.admin),a=layui.view,i=layui.setter,r=layui.table,n=layui.form;r.render({elem:"#LAY-product-manage",url:i.remoteurl+"/product/products",where:{access_token:layui.data(i.tableName).access_token},cols:[[{type:"checkbox",fixed:"left"},{field:"productId",width:100,title:"ID",sort:!0},{field:"name",title:"项目名称",minWidth:100},{field:"price",title:"票价",width:100},{field:"username",title:"商户名称",width:200},{field:"img",title:"相片",width:100,templet:"#imgTpl"},{field:"enabled",title:"状态",templet:"#buttonTpl",width:150,align:"center"},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-product-webuser"}]],page:!0,limit:30,text:{none:"暂无数据"}}),r.on("tool(LAY-product-manage)",function(e){var r=e.data;"del"===e.event?layer.prompt({formType:1,title:"敏感操作，请验证口令"},function(a,n){layer.close(n),layer.confirm("真的删除行么",function(a){t.req({url:i.remoteurl+"/product/products",method:"DELETE",data:{productId:r.productId},success:function(e){0==e.code?layer.msg("删除成功",{time:1e3,icon:1},function(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e),window.parent.location.reload()}):layer.msg(e.msg,{icon:5})}}),e.del(),layer.close(a)})}):"edit"===e.event&&t.popup({title:"编辑网红项目",area:["500px","450px"],id:"LAY-popup-product-add",success:function(e,l){a(this.id).render("product/product",r).done(function(){n.render(null,"layuiadmin-form-product"),n.on("submit(LAY-product-back-submit)",function(e){var a=e.field;t.req({url:i.remoteurl+"/product/products",method:"PUT",data:a,success:function(e){0==e.code?layer.msg("修改成功",{time:1e3,icon:1},function(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e),window.parent.location.reload()}):layer.msg(e.msg,{icon:5})}}),layui.table.reload("LAY-product-manage"),layer.close(l)})})}})}),r.render({elem:"#LAY-user-back-manage",url:i.remoteurl+"/systemadmin/userlist",where:{access_token:layui.data(i.tableName).access_token},cols:[[{type:"checkbox",fixed:"left"},{field:"adminId",width:80,title:"ID",sort:!1},{field:"username",title:"登录名"},{field:"cellphone",title:"手机"},{field:"email",title:"邮箱"},{field:"roleName",title:"角色"},{field:"address",title:"地址"},{field:"isDel",title:"审核状态",templet:"#buttonTpl",minWidth:80,align:"center"},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-useradmin-admin"}]],done:function(e,t,a){},text:{none:"暂无相关数据"}}),r.on("tool(LAY-user-back-manage)",function(e){var r=e.data;"del"===e.event?layer.prompt({formType:1,title:"敏感操作，请验证口令"},function(a,n){layer.close(n),layer.confirm("确定删除此管理员？",function(a){t.req({url:i.remoteurl+"/systemadmin/users",method:"DELETE",data:{adminId:r.adminId},success:function(e){0==e.code?layer.msg("删除成功",{time:1e3,icon:1},function(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e),window.parent.location.reload()}):layer.msg(e.msg,{icon:5})}}),e.del(),layer.close(a)})}):"edit"===e.event&&t.popup({title:"编辑管理员",area:["420px","450px"],id:"LAY-popup-user-add",success:function(e,l){a(this.id).render("user/administrators/adminform",r).done(function(){n.render(null,"layuiadmin-form-admin"),n.on("submit(LAY-user-back-submit)",function(e){var a=e.field;t.req({url:i.remoteurl+"/systemadmin/users",method:"PUT",data:a,success:function(e){0==e.code?layer.msg("修改成功",{time:1e3,icon:1},function(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e),window.parent.location.reload()}):layer.msg(e.msg,{icon:5})}}),layui.table.reload("LAY-user-back-manage"),layer.close(l)})})}})}),e("product",{})});