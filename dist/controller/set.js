/** layuiAdmin.pro-v1.2.1 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(["form","upload"],function(e){var n=layui.$,t=layui.layer,a=(layui.laytpl,layui.setter),i=(layui.view,layui.admin),r=layui.form,s=layui.upload;n("body");r.render(),r.verify({nickname:function(e,n){return new RegExp("^[a-zA-Z0-9_一-龥\\s·]+$").test(e)?/(^\_)|(\__)|(\_+$)/.test(e)?"用户名首尾不能出现下划线'_'":/^\d+\d+\d$/.test(e)?"用户名不能全为数字":void 0:"用户名不能有特殊字符"},pass:[/^[\S]{6,12}$/,"密码必须6到12位，且不能出现空格"],repass:function(e){if(e!==n("#LAY_password").val())return"两次密码输入不一致"}}),r.on("submit(set_website)",function(e){return t.msg(JSON.stringify(e.field)),!1}),r.on("submit(set_system_email)",function(e){return t.msg(JSON.stringify(e.field)),!1}),r.on("submit(setmyinfo)",function(e){return e.field.admin_id=1,console.log(e),i.req({url:a.remoteurl+"/systemadmin/users",data:e.field,method:"PUT",success:function(e){0==e.code?t.msg("添加成功",{time:1e3,icon:1},function(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e),window.parent.location.reload()}):t.msg(e.msg,{icon:5})}}),!0});var o=n("#LAY_avatarSrc");s.render({url:"/api/upload/",elem:"#LAY_avatarUpload",done:function(e){0==e.status?o.val(e.url):t.msg(e.msg,{icon:5})}}),i.events.avartatPreview=function(e){var n=o.val();t.photos({photos:{title:"查看头像",data:[{src:n}]},shade:.01,closeBtn:1,anim:5})},r.on("submit(setmypass)",function(e){return i.req({url:a.remoteurl+"/systemadmin/password",data:e.field,method:"PUT",success:function(e){0==e.code&&t.msg("密码修改成功",{time:1e3,icon:1},function(){var e=parent.layer.getFrameIndex(window.name);parent.layer.close(e),window.parent.location.reload()})}}),!1}),e("set",{})});